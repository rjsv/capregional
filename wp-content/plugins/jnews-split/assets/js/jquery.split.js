!function(t){"use strict";var n=function(n,a){this.container=t(void 0===n?"body":n),this.data=null,this.xhr=null,this.xhr_cache=[],this.id=this.container.find(".split-container").data("id"),this.init()};n.DEFAULTS={},n.prototype.init=function(){void 0!==window[this.id]&&(this.data=window[this.id],this.data.index=parseInt(this.data.index),this.menu_drop(),"all"===this.data.mode||"ajax"===this.data.mode?this.mode_load_all():this.mode_normal(),t(window).bind("popstate",t.proxy(this.popstate,this)),t(window).bind("jnews_after_split_content_ajax",t.proxy(this.after_ajax,this)))},n.prototype.after_ajax=function(){void 0!==jnews.popup&&jnews.popup.init(this.container.find(".entry-content")),jQuery().jskill&&this.container.find(".jeg_reviewbars").jskill()},n.prototype.menu_drop=function(){var n=this.container.find(".jeg_splitpost_bar");n.find(".jeg_splitpost_nav").length&&n.each((function(){var a=t(this);a.find(".nav_wrap"),a.find(".jeg_splitpost_nav");a.find(".current_title").on("click",(function(){n.not(a).removeClass("nav-open"),a.toggleClass("nav-open")})),t(document).mouseup((function(n){a.hasClass("nav-open")&&!t(n.target).parents(".nav_wrap").length>0&&a.removeClass("nav-open")}))}))},n.prototype.mode_normal=function(){},n.prototype.mode_load_all=function(){var n=this;n.container.find(".split-container").hasClass("has-half-content")&&n.container.find(".split-carousel").on("initialized.owl.carousel",(function(){t(this).find(".split-wrapper").each((function(){var n=t(this),a=n.find(".split-image > img");a.length>0&&a.width()<a.height()&&n.addClass("split-half-content")}))})),n.container.find(".split-carousel").owlCarousel({items:1,nav:!(!n.container.find(".split-carousel").hasClass("has-nav-content")&&"17"!==n.data.type)&&"true",navText:!1,margin:30,startPosition:n.data.index,mouseDrag:!1,autoHeight:!0,onChanged:function(t){var a=t.item.index;null===a&&(a=n.data.index),n.change_slide(a,!0)}}),n.container.find(".jeg_splitpost_nav a").on("click",(function(a){a.preventDefault();var i=t(this).parents(".jeg_splitpost_bar");t(i).removeClass("nav-open");var e=t(this).data("id");n.change_slide(e,!0)})),n.container.find(".jeg_split_pagination .page_number").on("click",(function(a){a.preventDefault();var i=t(this).data("id");n.change_slide(i,!0)})),n.container.find(".jeg_split_pagination .page_nav, .jeg_bottomnav .page_nav, .jeg_splitpost_bar .page_nav").on("click",(function(a){a.preventDefault();t(this).hasClass("prev")?n.change_slide(n.data.index-1,!0):n.change_slide(n.data.index+1,!0)}))},n.prototype.popstate=function(t){if(void 0!==t.originalEvent){var n=t.originalEvent.state;n&&"split"===n.type&&this.change_slide(n.id,!1)}},n.prototype.change_slide=function(n,a){n<0&&(n=0),n>this.data.max&&(n=this.data.max),this.data.index===n||(this.data.index=n,a&&this.change_url(n),this.change_title(n),"all"===this.data.mode?this.change_content(n):this.change_content_ajax(n),this.change_control(n),this.scroll_top(),t(window).trigger("resize"))},n.prototype.scroll_top=function(){var n=65;t("#wpadminbar").length>0&&(n+=32),t("html, body").stop().animate({scrollTop:this.container.find(".top-split-nav").offset().top-n},500)},n.prototype.change_title=function(t){var n=this.data.content[t];document.title=n.page_title},n.prototype.change_url=function(t){var n=this.data.content[t];n.type="split",history&&history.pushState&&history.pushState(n,"",n.url),this.push_analytic(n.url,this.data.post_id)},n.prototype.change_content=function(t){this.container.find(".content-inner .split-wrapper").removeClass("active"),this.container.find(".content-inner .split-wrapper[data-id='"+t+"']").addClass("active"),this.container.find(".split-carousel").trigger("to.owl.carousel",t,200)},n.prototype.cache_get=function(t){for(var n=JSON.stringify(t),a=0;a<this.xhr_cache.length;a++)if(this.xhr_cache[a].param==n)return this.xhr_cache[a].result;return!1},n.prototype.cache_save=function(t,n){var a=JSON.stringify(t);this.xhr_cache.push({param:a,result:n})},n.prototype.process_content_ajax=function(n,a){this.container.find(".content-inner .split-wrapper").html(a).removeClass("loading"),this.cache_save(n,a),t(document).trigger("jnews_after_split_content_ajax",[this.container.find(".content-inner .split-wrapper")])},n.prototype.change_content_ajax=function(n){var a={index:n,"split-post":!0};this.container.find(".content-inner .split-wrapper").addClass("loading");var i=this.cache_get(a);i?this.process_content_ajax(a,i):this.xhr=t.ajax({type:"post",dataType:"html",data:a,success:t.proxy(this.process_content_ajax,this,a)})},n.prototype.push_analytic=function(t,n){window.jnews&&window.jnews.ajax_analytic&&jnews.ajax_analytic.update(t,n)},n.prototype.change_control=function(n){var a=null,i=null,e=this.data.content[n];this.container.find(".jeg_splitpost_bar").each((function(){t(this).find(".jeg_splitpost_nav li").removeClass("current"),t(t(this).find(".jeg_splitpost_nav li").get(n)).addClass("current")})),this.change_nav_text(n);var s=this.data.page_text.replace("{page}",e.page);this.container.find(".jeg_split_pagination .page_info").text(s),this.container.find(".jeg_split_pagination .nav_link .page_number").removeClass("active"),this.container.find(".jeg_split_pagination .nav_link .page_number[data-id='"+n+"']").addClass("active"),this.container.find(".jeg_split_pagination .page_nav").removeClass("disabled"),0==n&&this.container.find(".jeg_split_pagination .page_nav.prev").addClass("disabled"),n==this.data.max&&this.container.find(".jeg_split_pagination .page_nav.next").addClass("disabled"),this.container.find(".jeg_bottomnav .page_nav").removeClass("hide"),0==n&&this.container.find(".jeg_bottomnav .page_nav.prev").addClass("hide"),n==this.data.max&&this.container.find(".jeg_bottomnav .page_nav.next").addClass("hide"),n>0&&(a=this.data.content[n-1],this.container.find(".jeg_bottomnav .page_nav.prev a").attr("href",a.url),this.container.find(".jeg_bottomnav .page_nav.prev strong").text(this.decode_string(a.title))),n<this.data.max&&(i=this.data.content[n+1],this.container.find(".jeg_bottomnav .page_nav.next a").attr("href",i.url),this.container.find(".jeg_bottomnav .page_nav.next strong").text(this.decode_string(i.title))),this.container.find(".jeg_splitpost_bar .page_nav").removeClass("disable"),n>0&&(a=this.data.content[n-1],this.container.find(".jeg_splitpost_bar .page_nav.prev a").attr("href",a.url)),n<this.data.max&&(i=this.data.content[n+1],this.container.find(".jeg_splitpost_bar .page_nav.next a").attr("href",i.url)),0==n&&this.container.find(".jeg_splitpost_bar .page_nav.prev").addClass("disable").find("a").attr("href","#"),n==this.data.max&&this.container.find(".jeg_splitpost_bar .page_nav.next").addClass("disable").find("a").attr("href","#")},n.prototype.decode_string=function(t){return(new DOMParser).parseFromString("<!doctype html><body>"+t,"text/html").body.textContent},n.prototype.change_nav_text=function(t){var n=this.data.content[t],a="<span class='pagenum'>"+n.page+".</span> "+n.title;this.container.find(".jeg_splitpost_bar .current_title").html(a)};var a=t.fn.jsplit;t.fn.jsplit=function(a){return t(this).each((function(){var i=t(this),e=t.extend({},n.DEFAULTS,i.data(),"object"==typeof a&&a),s=i.data("jeg.split");s||i.data("jeg.split",s=new n(this,e))}))},t.fn.jsplit.Constructor=n,t.fn.jsplit.noConflict=function(){return t.fn.jsplit=a,this},t(document).ready((function(){t("body").jsplit()}))}(jQuery);