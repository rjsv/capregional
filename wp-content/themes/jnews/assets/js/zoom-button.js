!function(o){"use strict";window.jnews.zoom=window.jnews.zoom||{},window.jnews.zoom={init:function(){this.container=o("body"),this.is_enable=void 0!==jnewsoption.zoom_button?jnewsoption.zoom_button:0,this.zoomContainer=this.container.find(".jeg_meta_zoom"),(this.is_enable&&this.zoomContainer.length>0||this.zoomContainer.length>0)&&(this.zoomOut=this.zoomContainer.find(".zoom-out"),this.zoomReset=this.zoomContainer.find(".zoom-reset"),this.zoomIn=this.zoomContainer.find(".zoom-in"),this.zoomInStep=this.zoomContainer.attr("data-in-step"),this.zoomOutStep=10-this.zoomContainer.attr("data-out-step"),this.zoomLevel=1,this.zoomEvent(),null!==this.getZoomCookie("zoom_position")&&this.updateZoomCookie(this.getZoomCookie("zoom_position")))},setSizeContent:function(t,n){var e=t,i=this.container.find(".content-inner");i.length>0&&i.each((function(t,n){var i=o(n),s=null===i.parents(".jeg_inner_content").width()?i.parents(".jeg_custom_content_wrapper").width():i.parents(".jeg_inner_content").width(),r=i.parents(".entry-content"),m=i.parents(".with-share"),a=parseInt(i.css("marginLeft").replace("px","")),h=parseInt(i.css("marginRight").replace("px","")),c=i.height(),z=i[0].getBoundingClientRect().height,d=e>=1?z>c?z:c:z>c?c:z,g=d-d/e,f=m.length>0?a+h:0,l=e>=1?s/e-f:s/e-2*f;r.length>0?(r.css({height:parseInt(d)+"px"}),i.css({width:l})):(i.css({marginBottom:g+30}),i.css({width:l}))})),n&&this.setSizeContent(t,!1)},resetZoom:function(){this.zoomLevel=1,document.cookie="zoom_position="+this.zoomLevel+"; path=/;",this.setSizeContent(this.zoomLevel,!0);var t=this.container.find(".content-inner"),n=t.parents(".entry-content");t.length>0&&t.each((function(e,i){o(i).css({"-ms-zoom":"","-ms-transform":"","-ms-transform-origin":"","-moz-transform":"","-moz-transform-origin":"","-o-transform":"","-o-transform-origin":"","-webkit-transform":"","-webkit-transform-origin":"",overflow:"",width:""}),n.length>0?n.css({height:""}):t.css({marginBottom:""})}))},updateZoomCookie:function(t){var n=this.container.find(".content-inner");n.length&&n.each((function(n,e){o(e).css({"-ms-zoom":t,"-ms-transform":"scale("+t+")","-ms-transform-origin":"0 0","-moz-transform":"scale("+t+")","-moz-transform-origin":"0 0","-o-transform":"scale("+t+")","-o-transform-origin":"0 0","-webkit-transform":"scale("+t+")","-webkit-transform-origin":"0 0",overflow:"hidden"}).trigger("change")})),this.setSizeContent(t,!0)},updateZoom:function(t){var n=this;n.zoomLevel+=t,n.zoomLevel=n.zoomLevel>1+n.zoomInStep/10?1+n.zoomInStep/10:n.zoomLevel,n.zoomLevel=n.zoomLevel<n.zoomOutStep/10?n.zoomOutStep/10:n.zoomLevel,document.cookie="zoom_position="+n.zoomLevel+"; path=/;";var e=n.container.find(".content-inner");e.length&&e.each((function(t,e){o(e).css({"-ms-zoom":n.zoomLevel,"-ms-transform":"scale("+n.zoomLevel+")","-ms-transform-origin":"0 0","-moz-transform":"scale("+n.zoomLevel+")","-moz-transform-origin":"0 0","-o-transform":"scale("+n.zoomLevel+")","-o-transform-origin":"0 0","-webkit-transform":"scale("+n.zoomLevel+")","-webkit-transform-origin":"0 0",overflow:"hidden"}).trigger("change")})),n.setSizeContent(n.zoomLevel,!0)},getZoomCookie:function(o){var t=document.cookie.match("(^|;) ?"+o+"=([^;]*)(;|$)");return t?t[2]:null},zoomEvent:function(){var t=this,n=t.container.find(".content-inner");t.width=o(window).width(),t.height=o(window).height(),t.zoomOut.on("click",(function(){t.updateZoom(-.1)})),t.zoomIn.on("click",(function(){t.updateZoom(.1)})),t.zoomReset.on("click",(function(){t.resetZoom()})),n.length&&n.each((function(n,e){var i=t.getZoomCookie("zoom_position");o(e).unbind("change").on("change",(function(){setTimeout(function(){var n=o(this),e=n.parents(".entry-content"),s=n.parents(".post-autoload").length?n.parents(".post-autoload").data("id"):0,r=n;s&&(r=t.container.find('.post-autoload[data-id="'+s+'"]').find(".content-inner"));var m=r.height(),a=r[0].getBoundingClientRect().height,h=i>=1?a>m?a:m:a>m?m:a;e.length>0&&e.css({height:parseInt(h)+"px"})}.bind(this),1e3)}))})),o(window).resize((function(){o(window).width()===t.width&&o(window).height()===t.height||(t.width=o(window).width(),t.height=o(window).height(),t.resetZoom())}))}},o(document).bind("jnews-ajax-load",(function(o,t){jnews.zoom.init()})),o(document).ready((function(){jnews.zoom.init()}))}(jQuery);